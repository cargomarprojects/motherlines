<div class="page-header">
    <div class="col">
        <label>Tracking</label>
        <button class="btn btn-primary btn-sm mr-1" (click)="Close()">Return</button>
    </div>
</div>

<div *ngIf="errorMessage">
    <div class="alert alert-primary">
        {{errorMessage}}
    </div>
</div>

<div class="page-body">
    <div class="row">
        <div class="col-md-12">
            <div class="row pt-2">
                <!-- First row -->
                <div class="col-md-12 px-0 mx-0">
                    <div class="row">
                        <div class="col-md-6 testbox  px-0 mx-0">
                            <div class="form-group row">
                                <label class="col-2 col-form-label col-form-label-sm">Ref No</label>
                                <div class="col-10">
                                    <input disabled class="form-control form-control-sm" type="text"
                                        [(ngModel)]="refno" maxlength="500"
                                        (blur)="onBlur('refno',null)" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
                <hr>
                <!-- Second row -->
                <div class="col-md-12 px-0 mx-0">
                    <div class="row">
                        <div class="col-md-12 testbox  px-0 mx-0">
                            <div class="page-list">
                                <div class="page-body table-responsive">
                                    <table class="table  table-hover table-sm">
                                        <thead class="page-body-thead">
                                            <tr>
                                                <th>STATUS</th>
                                                <th>REMARKS</th>
                                                <th>DATE</th>
                                            </tr>
                                        </thead>
                                        <tbody class="page-body-tbody">
                                            <tr *ngFor="let rec of trackrecords; let i = index"
                                                [class.active]="i == selectedRowIndex" (click)="SetRowIndex(i)">
                                                <td>{{rec.param_name1}} </td>
                                                <td class="p-0"><input class="form-control form-control-sm" type="text"
                                                        [(ngModel)]="rec.remarks" maxlength="500"
                                                        (blur)="onBlur('remarks',rec)" /></td>
                                                <td class="p-0">
                                                    <app-date [inputdate]="rec.date" (ValueChanged)="rec.date=$event">
                                                    </app-date>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="page-footer">
    <div class="row">
        <div class="col-md-4">
            <div class="form-group row">
                <div class="col-8">
                    <button class="btn btn-primary btn-sm mr-1" (click)="Save()">Save</button>
                </div>
            </div>
        </div>
    </div>
</div>

<br>
<div class="page-header">
    <div class="col">
        <label>Internal Memo</label>
    </div>
</div>
<div class="page-body">
    <div class="row">
        <div class="col-md-12">
            <div class="row pt-2">
                <!-- First row -->
                <div class="col-md-12 px-0 mx-0">
                    <div class="row">
                        <div class="col-md-6 testbox  px-0 mx-0">
                            <div class="form-group row">
                                <label class="col-1 col-form-label col-form-label-sm">Date</label>
                                <div class="col-9">
                                    <app-date disabled [inputdate]="trackmemorecord.date" (ValueChanged)="trackmemorecord.date=$event">
                                    </app-date>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-1 col-form-label col-form-label-sm">*Memo</label>
                                <div class="col-9">
                                      <select class="form-control form-control-sm" [(ngModel)]="cmbNotes" (change)="OnChange('cmbNotes')" >
                                        <option *ngFor="let rec of MemoList" [value]="rec.name">{{rec.name}}</option>
                                      </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-1 col-form-label col-form-label-sm"></label>
                                <div class="col-9">
                                    <textarea rows="5" class="form-control form-control-sm" [(ngModel)]="trackmemorecord.remarks" (blur)="onBlur('trackremarks','')" required maxlength="500"></textarea>  
                                </div>
                            </div>
                            <div class="form-group row">
                                    <label class="offset-1 col-9 col-form-label col-form-label-sm">*Memo (Press ENTER Key to Add a New Line.)</label>
                                <div class="col-1">
                                    <button class="btn btn-primary btn-sm mr-1" (click)="SaveMemo()">{{lblSaveMemo}}</button>
                                </div>
                                <div class="col-1">
                                    <button class="btn btn-primary btn-sm mr-1" (click)="NewRecord()">New</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
                <hr>
                <!-- Second row -->
                <div class="col-md-12 px-0 mx-0">
                    <div class="row">
                        <div class="col-md-12 testbox  px-0 mx-0">
                            <div class="page-list">
                                <div class="page-body table-responsive">
                                    <table class="table  table-hover table-sm">
                                        <thead class="page-body-thead">
                                            <tr>
                                                <th>CREATED-BY</th>
                                                <th>DATE </th>
                                                <th>MEMO</th>
                                                <th style="text-align:center">ATTACHMENTS</th>
                                                <th style="text-align:center">REMOVE</th>
                                            </tr>
                                        </thead>
                                        <tbody class="page-body-tbody">
                                            <tr *ngFor="let rec of trackmemorecords; let i = index"
                                                [class.active]="i == selectedRowIndex" (click)="SetRowIndex(i)">
                                                <td class="p-0">{{rec.rec_created_by}} </td>
                                                <td class="p-0">{{rec.date  | date : gs.date_display_fmt_with_time}}</td>
                                                <td class="p-0"  (blur)="onBlur('remarks',rec)" (click)="EditRow(rec)" >{{rec.remarks}}</td>
                                                <td align='center'><i class="fa fa-paperclip  fa-lg pointer" style="font-size:24px;color:black" aria-hidden="true" (click)="AttachRow(rec)" ></i></td>                                    
                                                <td align='center'><i class="fa fa-trash  fa-lg pointer" aria-hidden="true" (click)="RemoveRow(rec)" ></i></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
        </div>
    </div>
</div>

