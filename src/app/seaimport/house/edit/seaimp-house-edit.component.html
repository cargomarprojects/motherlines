<div class="page-header">
    <div class="col">
      <label>{{title}} ({{mode}})</label>
      <button class="btn btn-primary btn-sm mr-1" (click)="Close()">{{closeCaption}}</button>
    </div>
  </div>
  
  <div *ngIf="errorMessage">
    <div class="alert alert-primary">
      {{errorMessage}}
    </div>
  </div>
  
  <div class="page-body">
  
    <div class="row">
  
      <div class="col-md-10">
  
        <div class="row pt-2">
  
          <!-- First row -->
          <div class="col-md-12 px-0 mx-0">
            <div class="row">
              <div class="col-md-6 testbox  px-0 mx-0">
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Ref#</label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_refno')"
                      [(ngModel)]="record.mbl_refno" [disabled]="true" maxlength="15" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Ref Date</label>
                  <div class="col-9">
                    <app-date [inputdate]="record.mbl_ref_date" (ValueChanged)="sdate=$event"></app-date>
                  </div>
                </div>
              </div>
              <div class="col-md-6 testbox  px-0 mx-0">
                <div *ngIf="gs.JOB_TYPE_OI.length>0" class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Job Type</label>
                  <div class="col-9">
                    <select class="form-control form-control-sm" [(ngModel)]="record.mbl_jobtype_id">
                      <option *ngFor="let rec of gs.JOB_TYPE_OE" [value]="rec.code">{{rec.name}}</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Stage</label>
                  <div class="col-9">
                    <select class="form-control form-control-sm" [(ngModel)]="record.mbl_shipment_stage">
                      <option *ngFor="let rec of gs.SHIPMENT_STAGE_OI" [value]="rec.code">{{rec.name}}</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            <hr>
          </div>
  
  
          <!-- Second row -->
          <div class="col-md-12 px-0 mx-0">
            <div class="row">
              <div class="col-md-6 testbox  px-0 mx-0">
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Mbl#</label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_no')" #mbl_no
                      (focusout)="onFocusout('mbl_no')" [(ngModel)]="record.mbl_no" maxlength="60" />
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Master Agent</label>
                  <div class="col-9">
  
                    <app-autocomplete2 [controlname]="'AGENT'" [tabletype]="'MASTER'" [displaycolumn]="'NAME'"
                      [displaydata]="record.mbl_agent_name" (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
  
                  </div>
                </div>
  
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Carrier</label>
                  <div class="col-9">
  
                    <app-autocomplete2 [controlname]="'CARRIER'" [tabletype]="'SEA CARRIER'" [displaycolumn]="'NAME'"
                      [displaydata]="record.mbl_liner_name" (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
  
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">A/N.Handled.By</label>
                  <div class="col-9">
  
                    <app-autocomplete2 [controlname]="'HANDLEDBY'" [tabletype]="'PARAM'" [subtype]="'SALESMAN'"
                      [displaycolumn]="'NAME'" [displaydata]="record.mbl_handled_name"
                      (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
  
  
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Sales.Rep</label>
                  <div class="col-9">
  
                    <app-autocomplete2 [controlname]="'SALESMAN'" [tabletype]="'PARAM'" [subtype]="'SALESMAN'"
                      [displaycolumn]="'NAME'" [displaydata]="record.mbl_salesman_name"
                      (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
  
  
  
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Frt.Status</label>
                  <div class="col-9">
                    <select class="form-control form-control-sm" [(ngModel)]="record.mbl_frt_status">
                      <option *ngFor="let rec of gs.PARAM_FREIGHT_STATUS" [value]="rec.name">{{rec.name}}</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Shipping Term</label>
                  <div class="col-9">
                    <select class="form-control form-control-sm" [(ngModel)]="record.mbl_ship_term_id">
                      <option *ngFor="let rec of gs.PARAM_CARGO_MOVEMENT" [value]="rec.code">{{rec.name}}</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Shipping Type</label>
                  <div class="col-9">
                    <select class="form-control form-control-sm" [(ngModel)]="record.mbl_cntr_type">
                      <option [value]="'FCL'">FCL</option>
                      <option [value]="'LCL'">LCL</option>
                      <option [value]="'CONSOLE'">CONSOLE</option>
                      <option [value]="'OTHERS'">OTEHRS</option>
                    </select>
                  </div>
                </div>
  
                <!-- <div class="form-group row">
                    <label class="col-3 col-form-label col-form-label-sm"></label>
                    <div class="col-9">
                      <input type="checkbox" [(ngModel)]="record.mbl_direct_bool" />
                      <span>Direct Shipment</span>
                    </div>
                  </div> -->
  
  
              </div>
              <div class="col-md-6 testbox  px-0 mx-0">
  
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Pol</label>
                  <div class="col-9">
  
                    <app-autocomplete2 [controlname]="'POL'" [tabletype]="'SEA PORT'" [displaycolumn]="'NAME'"
                      [displaydata]="record.mbl_pol_name" (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
  
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Pol.ETD</label>
                  <div class="col-9">
                    <app-date [inputdate]="record.mbl_pol_etd" (ValueChanged)="sdate=$event"></app-date>
                  </div>
                </div>
  
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Port.Discharge</label>
                  <div class="col-9">
  
                    <app-autocomplete2 [controlname]="'POD'" [tabletype]="'SEA PORT'" [displaycolumn]="'NAME'"
                      [displaydata]="record.mbl_pod_name" (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Pod.ETA</label>
                  <div class="col-9">
                    <app-date [inputdate]="record.mbl_pod_eta" (ValueChanged)="sdate=$event"></app-date>
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Place.Delivery</label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_place_delivery')"
                      [(ngModel)]="record.mbl_place_delivery" maxlength="60" />
                  </div>
                </div>
                <!-- <div class="form-group row">
                    <label class="col-3 col-form-label col-form-label-sm">Port.Final</label>
                    <div class="col-9">
                      <app-autocomplete2 [controlname]="'POFD'" [tabletype]="'SEA PORT'" [displaycolumn]="'NAME'"
                        [displaydata]="record.mbl_pofd_name" (ValueChanged)="LovSelected($event)">
                      </app-autocomplete2>
    
    
                    </div>
                  </div> -->
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Final.ETA</label>
                  <div class="col-9">
                    <app-date [inputdate]="record.mbl_pofd_eta" (ValueChanged)="sdate=$event"></app-date>
                  </div>
                </div>
  
  
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Origin.Country</label>
                  <div class="col-9">
  
                    <app-autocomplete2 [controlname]="'COUNTRY'" [tabletype]="'PARAM'" [subtype]="'COUNTRY'"
                      [displaycolumn]="'NAME'" [displaydata]="record.mbl_country_name"
                      (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
  
                  </div>
                </div>
  
  
  
                <div class="form-group row">
  
                  <label class="col-3 col-form-label col-form-label-sm">Vessel</label>
                  <div class="col-4 pr-0">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_vessel')"
                      [(ngModel)]="record.mbl_vessel" maxlength="60" />
                  </div>
                  <label class="col-2 col-form-label col-form-label-sm pr-0">Voyage</label>
                  <div class="col-3 pl-0">
                    <input class="form-control form-control-sm " type="text" (blur)="onBlur('mbl_voyage')"
                      [(ngModel)]="record.mbl_voyage" maxlength="60" />
                  </div>
  
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">MBL Status</label>
                  <div class="col-4 pr-0">
                    <select [disabled]="mode=='EDIT' && this.gs.USER_DISABLE_EDIT_SI_MBLSTATUS=='Y'" class="form-control form-control-sm" [(ngModel)]="record.mbl_status">
                      <option *ngFor="let rec of MblStatusList" [value]="rec.name">{{rec.name}}</option>
                    </select>
                  </div>
                  <label class="col-2 col-form-label col-form-label-sm">BL Status</label>
                  <div class="col-3 pl-0">
                    <select class="form-control form-control-sm" [(ngModel)]="record.mbl_is_sea_waybill">
                      <option *ngFor="let rec of BlStatusList" [value]="rec.name">{{rec.name}}</option>
                    </select>
                  </div>
                </div>
  
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">OMBL.Sent.Date</label>
                  <div class="col-7 pr-0">
                    <app-date [inputdate]="record.mbl_ombl_sent_on" (ValueChanged)="sdate=$event"></app-date>
                  </div>
                  <div class="col-2 ml-0 pl-0">
                    <select class="form-control form-control-sm" [(ngModel)]="record.mbl_ombl_sent_ampm">
                      <option [value]="'AM'">AM</option>
                      <option [value]="'PM'">PM</option>
                    </select>
                  </div>
                </div>
  
              </div>
  
            </div>
            <hr>
            <div class="row">
              <div class="col-md-6 testbox  px-0 mx-0">
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Cargo Location</label>
                  <div class="col-9">
                    <app-autocomplete2 [controlname]="'CARGO-LOC'" [tabletype]="'MASTER'" [subtype]="'LOCATION'"
                      [displaycolumn]="'NAME'" [displaydata]="record.mbl_cargo_loccode"
                      (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
                  </div>
                </div>
                <div class="form-group row">
                  <!-- <label class="col-3 col-form-label col-form-label-sm"></label> -->
                  <button class=" col-3 btn btn-primary btn-sm">Cpoy to All House</button>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_cargo_locname')"
                      [(ngModel)]="record.mbl_cargo_locname" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_cargo_locaddr1')"
                      [(ngModel)]="record.mbl_cargo_locaddr1" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_cargo_locaddr2')"
                      [(ngModel)]="record.mbl_cargo_locaddr2" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_cargo_locaddr3')"
                      [(ngModel)]="record.mbl_cargo_locaddr3" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_cargo_locaddr4')"
                      [(ngModel)]="record.mbl_cargo_locaddr4" maxlength="60" />
                  </div>
                </div>
              </div>
              <div class="col-md-6 testbox  px-0 mx-0">
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm">Devanning Location</label>
                  <div class="col-9">
                    <app-autocomplete2 [controlname]="'DEVAN-LOC'" [tabletype]="'MASTER'" [subtype]="'LOCATION'"
                      [displaycolumn]="'NAME'" [displaydata]="record.mbl_devan_loccode"
                      (ValueChanged)="LovSelected($event)">
                    </app-autocomplete2>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_devan_locname')"
                      [(ngModel)]="record.mbl_devan_locname" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_devan_locaddr1')"
                      [(ngModel)]="record.mbl_devan_locaddr1" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_devan_locaddr2')"
                      [(ngModel)]="record.mbl_devan_locaddr2" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_devan_locaddr3')"
                      [(ngModel)]="record.mbl_devan_locaddr3" maxlength="60" />
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-3 col-form-label col-form-label-sm"></label>
                  <div class="col-9">
                    <input class="form-control form-control-sm" type="text" (blur)="onBlur('mbl_devan_locaddr4')"
                      [(ngModel)]="record.mbl_devan_locaddr4" maxlength="60" />
                  </div>
                </div>
              </div>
            </div>
  
            <hr>
  
            <div class="row">
  
              <div class="col-md-12">
                <div class="page-body table-responsive">
  
                  <div class="form-group row">
                    <div class="col-12">
                      <button class="btn btn-primary btn-sm mr-1" (click)="AddRow()">Add Cntr</button>
                      <button class="btn btn-primary btn-sm mr-1" (click)="RemoveRow()">Remove Cntr</button>
                      <button class="btn btn-primary btn-sm mr-1" (click)="Copy2House()">Copy Cntr to House</button>
                      <button class="btn btn-primary btn-sm mr-1" (click)="UpdatePuEr()">Update P/U & E/R</button>
                    </div>
                  </div>
  
                  <table class="table  table-hover table-sm">
                    <thead class="page-body-thead">
                      <tr>
                        <th>CNTR.NO</th>
                        <th>TYPE</th>
                        <th>SEAL NO</th>
                        <th>PCS</th>
                        <th>UNIT</th>
                        <th>KGS</th>
                        <th *ngIf="this.gs.BRANCH_REGION != 'USA'">TARE-WT</th>
                        <th>CBM</th>
                        <th>PICKUP</th>
                        <th>EMPTY RETURN</th>
                        <th>CNTR MOVEMENT</th>
                      </tr>
                    </thead>
                    <tbody class="page-body-tbody">
                      <tr *ngFor="let rec of records">
                        <td>
                          <input class="form-control form-control-sm" type="text" [(ngModel)]="rec.cntr_no" maxlength="11"
                            (blur)="onBlur('cntr_no',rec)" />
                        </td>
                        <td>
                          <app-autocomplete2 [controlname]="'CONTAINER TYPE'" [displaycolumn]="'CODE'"
                            [tabletype]="'PARAM'" [subtype]="'CONTAINER TYPE'" [uid]="rec.cntr_pkid"
                            [displaydata]="rec.cntr_type" (ValueChanged)="LovSelected($event)">
                          </app-autocomplete2>
                        </td>
                        <td>
                          <input class="form-control form-control-sm" type="text" [(ngModel)]="rec.cntr_sealno"
                            maxlength="25" (blur)="onBlur('cntr_sealno',rec)" />
                        </td>
                        <td>
                          <input class="form-control form-control-sm" type="number" [(ngModel)]="rec.cntr_pieces"
                            (blur)="onBlur('cntr_pieces',rec)" />
                        </td>
                        <td>
                          <input class="form-control form-control-sm" type="text" [(ngModel)]="rec.cntr_packages_uom"
                            maxlength="4" (blur)="onBlur('cntr_packages_uom',rec)" />
                        </td>
                        <td>
                          <input class="form-control form-control-sm" type="number" [(ngModel)]="rec.cntr_weight"
                            (blur)="onBlur('cntr_weight',rec)" />
                        </td>
                        <td *ngIf="this.gs.BRANCH_REGION != 'USA'">
                          <input class="form-control form-control-sm" type="number" [(ngModel)]="rec.cntr_tare_weight"
                            (blur)="onBlur('cntr_tare_weight',rec)" />
                        </td>
                        <td>
                          <input class="form-control form-control-sm" type="number" [(ngModel)]="rec.cntr_cbm"
                            (blur)="onBlur('cntr_cbm',rec)" />
                        </td>
                        <td>
                          <app-date [inputdate]="rec.cntr_pick_date" (ValueChanged)="rec.cntr_pick_date=$event">
                          </app-date>
                        </td>
                        <td>
                          <app-date [inputdate]="rec.cntr_return_date" (ValueChanged)="rec.cntr_return_date=$event">
                          </app-date>
                        </td>
                        <td><i class="fa fa-truck  fa-lg pointer" aria-hidden="true" (click)="ShowCntrMovement()"></i>
                        </td>
  
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
  
            </div>
  
            <hr>
            <div *ngIf="mode=='EDIT'" class="row">
  
              <div class="col-md-12">
                <div class="page-body table-responsive">
  
                  <div class="form-group row">
                    <div class="col-12">
                      <button class="btn btn-primary btn-sm mr-1" (click)="AddHouse()">Add House</button>
                    </div>
                  </div>
  
                  <table class="table  table-hover table-sm">
                    <thead class="page-body-thead">
                      <tr>
                        <th>HOUSE</th>
                        <th>SHIPPER</th>
                        <th>CONSIGNEE</th>
                        <th>PCS</th>
                        <th>HANDLED-BY</th>
                        <th>FREIGHT</th>
                        <th>TERMS</th>
                        <th>CREATED-BY</th>
                        <th>DATE</th>
                      </tr>
                    </thead>
                    <tbody class="page-body-tbody">
                      <tr *ngFor="let rec of hrecords">
                        <td>{{rec.hbl_houseno}}</td>
                        <td>{{rec.hbl_shipper_name}}</td>
                        <td>{{rec.hbl_consignee_name}}</td>
                        <td>{{rec.hbl_packages}}</td>
                        <td>{{rec.hbl_handled_name}}</td>
                        <td>{{rec.hbl_frt_status}}</td>
                        <td>{{rec.hbl_ship_term}}</td>
                        <td>{{rec.rec_created_by}}</td>
                        <td>{{rec.rec_created_date | date : gs.FRONTEND_DATEFORMAT }}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
  
            </div>
  
          </div>
  
        </div>
      </div>
      <div class="col-md-2 testbox">
  
        <div class="col-md-12  px-0 mx-0 py-2">
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">House Maintenence</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">POD</button>
          </div>
  
          <div class="form-group row">
  
            <button class=" col-12 btn btn-primary btn-sm">Devanning Instruction</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm" (click)="BtnNavigation('ARAP')">AR & AP</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Profit Report</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Shipment Label</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Messenger Slip</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Payment Request</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Attachments</button>
          </div>
  
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Add To Follow Up</button>
          </div>
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Internal Memo</button>
          </div>
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Request For Approval</button>
          </div>
          <div class="form-group row">
            <button class=" col-12 btn btn-primary btn-sm">Delivery Order</button>
          </div>
  
        </div>
  
  
      </div>
  
    </div>
  </div>
  
  
  <div class="page-footer">
    <div class="row">
      <div class="col-md-4">
        <div class="form-group row">
          <label class="col-4 col-form-label col-form-label-sm"></label>
          <div class="col-8">
            <button class="btn btn-primary btn-sm mr-1" *ngIf="gs.canSave(menuid,mode)" (click)="Save()">Save</button>
            <!-- <button class="btn btn-primary btn-sm mr-1" *ngIf="gs.canAdd(menuid)" (click)="NewRecord()">New</button>
            <button class="btn btn-primary btn-sm mr-1" (click)="Close()">{{closeCaption}}</button> -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div>
    <label class="col-form-label col-form-label-sm" *ngIf="record.rec_created_by"> CREATED BY: {{record.rec_created_by}} /
      {{record.rec_created_date}} </label>
  </div>