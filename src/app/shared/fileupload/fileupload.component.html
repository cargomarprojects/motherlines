
<div class="page-header">
  <div class="row align-items-center justify-content-left p-1">
    <label class="mr-3">{{Doc_title}}</label>
    <button class="btn btn-primary btn-sm mr-1" (click)="Close()">Return</button>
  </div>
</div>

<!-- <div class="page-list">

  <div class="page-body table-responsive">
    <table class="table  table-hover table-sm">
      <thead class="page-body-thead">
        <tr>
          <th>UPLOAD-BY</th>
          <th>UPLOAD-DATE</th>
          <th>TYPE</th>
          <th>NAME</th>
          <th>DELETED</th>
          <th *ngIf="canupload">DELETE</th>
        </tr>
      </thead>
      <tbody class="page-body-tbody">
        <tr *ngFor="let rec of RecordList">
          <td (click)="ShowFile(rec.doc_full_name)">{{rec.rec_created_by}}</td>
          <td (click)="ShowFile(rec.doc_full_name)">{{rec.rec_created_date}}</td>
          <td (click)="ShowFile(rec.doc_full_name)">{{rec.doc_catg_name}}</td>
          <td (click)="ShowFile(rec.doc_full_name)">{{rec.doc_file_name}}</td>
          <td (click)="ShowFile(rec.doc_full_name)">{{rec.rec_deleted_by}}</td>
          <td *ngIf="canupload">
            <App-Dialog [id]="{msg:'Delete Y/N', buttons:'yn', selected :false,id:rec.doc_pkid,name:1}" (result)="RemoveList($event)"></App-Dialog>
          </td>

        </tr>
      </tbody>
    </table>
  </div>

</div> -->

<div class="page-details" *ngIf="canupload">

  <div class="row">

    <div class="col-sm-6">
      <div class="form-group row">
        <label class="col-2 col-form-label col-form-label-sm">Type</label>
        <div class="col-10">
          <select class="form-control form-control-sm" [(ngModel)]="catg_id">
            <option *ngFor="let rec of DocTypeList" [value]="rec.param_pkid">{{rec.param_name}}</option>
          </select>
        </div>
      </div>
      <br />

      <div class="form-group row">
        <label class="col-2 col-form-label col-form-label-sm">File</label>
        <div class="col-10">
          <input type="file" id="file" style="width: 600px" #fileinput (change)="getFileDetails($event)">
        </div>
      </div>

      <br />

      <div class="form-group row" >
        <label class="col-2 col-form-label col-form-label-sm"></label>
        <div class="col-10">
          <button (click)="uploadFiles()">Upload</button>
        </div>
      </div>

    </div>


  </div>
</div>
<div class="page-body">
  <div class="row border">
    <div class="col-md-6 testbox  px-0 mx-0">
      <div class="form-group row">
        <label class="col-2 col-form-label col-form-label-sm">File</label>
        <div class="col-10">
          <input type="file" id="file" style="width: 600px" #fileinput (change)="getFileDetails($event)">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-2 col-form-label col-form-label-sm">FileName</label>
        <div class="col-10">
          <input class="form-control form-control-sm" type="text" (blur)="onBlur('fileName')"
            [(ngModel)]="fileName" maxlength="80" />
        </div>
      </div>
  
      <div class="form-group row">
        <label class="col-2 col-form-label col-form-label-sm">Ref# </label>
        <div class="col-10">
          <input class="form-control form-control-sm" type="text" (blur)="onBlur('fileRefno')"
            [(ngModel)]="fileRefno" maxlength="80" />
        </div>
      </div>
  
      <div class="form-group row">
        <label class="col-2 col-form-label col-form-label-sm">DocType</label>
        <div class="col-10">
          <select class="form-control form-control-sm" [(ngModel)]="fileDocType">
            <option *ngFor="let rec of Files_TypeList" [value]="rec.code">{{rec.name}}</option>
          </select>  
        </div>
      </div>
      <div class="form-group row" >
        <label class="col-2 col-form-label col-form-label-sm"></label>
        <div class="col-10">
          <button (click)="uploadFiles()">Upload</button>
        </div>
      </div>
    
  
    </div>
    <div class="col-md-6 testbox  px-0 mx-0">
  
    </div>
  </div>
  </div>

<div class="row border">
  <div class="col-md-12  px-0 mx-0">
    <div class="page-body table-responsive">
      <table class="table  table-hover table-sm">
        <thead class="page-body-thead">
          <tr>
            <th>OPEN</th>
            <th>DOC.TYPE</th>
            <th>FILE NAME</th>
            <th>SIZE</th>
            <th>REFERENCE #</th>
            <th>DATE</th>
            <th>REMOVE</th>
            <th>EMAIL</th>
          </tr>
        </thead>
        <tbody class="page-body-tbody">
          <tr *ngFor="let rec of RecordList">
            <td class="p-0">{{rec.file_uri}}</td>
            <td class="p-0">{{rec.files_type}}</td>
            <td class="p-0">{{rec.file_desc}}</td>
            <td class="p-0">{{rec.files_sizewithunit}}</td>
            <td class="p-0">{{rec.files_ref_no}}</td>
            <td class="p-0">{{rec.files_created_date}}</td>
            <td align='center'><i class="fa fa-trash  fa-lg pointer" aria-hidden="true"
              (click)="RemoveRow(rec)"></i></td>
            <td align='center'><i class="fa fa-trash  fa-lg pointer" aria-hidden="true"
              (click)="RemoveRow(rec)"></i></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div *ngIf="errorMessage">
  <div class="alert alert-primary">
    {{errorMessage}}
  </div>
</div>
